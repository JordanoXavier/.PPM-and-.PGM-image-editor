Atividade 1 - estruturas estáticas

Trata-se de um programa para manipulação de imagens em formato P2/PGM e P3/PPM usando estruturas de alocação estática para o armazenamento da imagem em memória principal (vetor/matriz).

O programa inicia na função main, chamando a inicializaArquivo, que recebe do usuário o nome ou diretório do arquivo a ser aberto e o abre.
Na mesma função, é lida a primeira linha do arquivo, que indica qual o tipo da imagem (P2 ou P3).

Ao identificar o formato, o programa pode ir para duas funções: lerP2 ou lerP3. Essas duas funções leem as informações restantes do arquivo (altura e largura, cor máxima, e o valor das cores de cada pixel). As 3 primeiras linhas do arquivo serão armazenadas em uma estrutura chamada dadosArquivo que será utilizada posteriormente para passar tais informações como parâmetro a outras funções.
No caso da função lerP2, as cores serão armazenadas em uma matriz com as dimensões lidas no arquivo. Já na função P3 serão guardadas em uma matriz também com a altura e largura lidas, porém com 3 dimensões para armazenamento das 3 cores de cada pixel (R,G,B), já que esse tipo de arquivo suporta isso, diferentemente do P2.

Após a leitura completa do arquivo, será transimitida a estrutura dadosArquivo e a matriz lida à respectiva função do menu de cada tipo/formato (função menuP2 ou menuP3). Nas funções menuP2 e menuP3 o usuário tem a possibilidade de escolher entre 6 opções que chamam funções (individuais de cada menu) para realizar operações com os dados lidos. 
Todas as opções possuem as versões P2 e P3 em decorrência da diferença no armazenamento dos pixels de cada formato de imagem, entretanto, o funcionamento para os dois tipos é idêntico. Além disso, todas elas exceto as opções de salvar imagem retornam ao respectivo menu, que dessa vez recebe os dados editados da imagem.

As funções são:

-recorteP2 e recorteP3:
Recebem do usuário um recorte/seleção da imagem inicial para a imagem de saída. Esse recorte é mapeado a partir de coordenadas X1 e Y1 (começando em 0) do canto superior esquerdo X2 e Y2 do canto inferior direito da área a ser recortada.
Primeiramente ocorrem verificações para descobrir se é possível realizar o recorte. Em caso de impossibilidade, retorna-se ao menu respectivo com a matriz e dados anteriores. Caso contrário, é gerada uma nova matriz com a área do recorte na original.
A nova matriz será printada na tela e encaminhada ao menu juntamente com os dados atualizados para novas edições ou gravação do arquivo.

-grayscaleP3:
Converte a imagem lida do formato P3 para P2. Como as imagens P2 já estão em escala de cinza, não há tal funcionalidade para esse tipo.
A conversão consiste, basicamente, em realizar uma média dos valores RGB de cada pixel e colocar nas posição equivalente de uma matriz P2 com apenas duas dimensões.
A nova matriz será printada na tela e encaminhada juntamente com os dados atualizados ao menuP2 e não ao menuP3, tendo em vista a conversão do tipo.

-greenscreenP2 e greenscreenP3:
Leem uma nova imagem e passam à imagem anterior todos os pixels da nova exceto os de uma cor escolhida pelo usuário (máscara). Para isso, primeiro é aberto e lido um novo arquivo do mesmo tipo da imagem de fundo. 
Posteriormete, é verificado se o tamanho da imagem de frente é menor ou igual à do fundo e se o tipo é mesmo, retornando ao menu em caso de impossibilidade de realização do efeito e lendo a cor de máscara caso possível.
Se lida a cor, é aplicado o efeito greenscreen. O resultado será encaminhado ao menu.

-rotacaoP2 e rotacaoP3:
Rotacionam a imagem no sentido horário em 90, 180 ou 270 graus recursivamente de acordo com a escolha do usuário no menu. Recebem do menu a imagem (dados e matriz) e o número de rotações a serem feitas (graus/90). É utilizada a recursividade para rotacionar a imagem mais de uma vez em 90º, passando a imagem recebida rotacionada junto com número de rotações restantes -1 à mesma função. O ponto de parada da recursão, que retorna ao menu, é quando o número de rotações é 1. 
Para realizar a rotação, compara-se a altura e largura da imagem recebida para saber se é uma matriz quadrada ou não. Caso seja, é realizada uma rotação simples de 90º utilizando uma matriz auxiliar. O resultado será printado na tela e encaminhado ao menu ou novamente à função caso hajam rotações pendentes.
Caso seja uma matriz não-quadrada, será criada uma matriz quadrada com a maior coordenada (altura ou largura), para que seja possível realizar a rotação de 90º. A matriz quadrada é preenchida com um valor negativo, recebe os valores originais nas posições equivalentes e é rotacionada com a ajuda de uma matriz auxiliar. A seguir, é criada uma nova matriz com altura e largura invertidas, que receberá os valores positivos da matriz quadrada rotacionada e será impressa na tela. O resultado, junto com os dados atualizados do arquivo serão encaminhados ao menu ou novamente à função caso ainda hajam rotações a serem feitas.

-salvarP2 e salvarP3:
Recebem do usuário o nome ou diretório que o arquivo (.pgm ou .ppm) será salvo e o criam com os dados e a imagem editada. Caso haja um arquivo de mesmo nome, será substituído pelo novo.
